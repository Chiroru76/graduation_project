<% if resource.errors.any? %>
  <div id="error_explanation" data-turbo-cache="false" role="alert" aria-live="assertive"
       class="border border-red-200 bg-gradient-to-b from-red-50 to-white p-3 rounded-lg text-red-800 shadow-sm mb-3">
    <div class="flex items-center gap-3 relative">
      <!-- warning icon -->
      <svg class="h-5 w-5 text-red-600 flex-shrink-0" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path fill="currentColor" d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
      </svg>

      <h2 class="text-base font-semibold m-0">
        <%= I18n.t("errors.messages.not_saved",
                   count: resource.errors.count,
                   resource: resource.class.model_name.human.downcase) %>
      </h2>

      <span class="ml-auto bg-red-600 text-white rounded-full px-2 text-xs" aria-hidden="true">
        <%= resource.errors.count %>
      </span>

      <button type="button"
              class="ml-2 text-red-700 hover:text-red-900 text-xl leading-none bg-transparent border-0 p-1"
              aria-label="閉じる"
              onclick="this.closest('#error_explanation').style.display='none'">
        &times;
      </button>
    </div>

    <ul class="list-none p-0 pl-2 mt-2 flex flex-col gap-2">
      <% resource.errors.full_messages.each do |message| %>
        <li class="flex items-center gap-2 bg-red-50 px-2 py-1 rounded">
          <svg class="h-2 w-2 text-red-600 flex-shrink-0" viewBox="0 0 8 8" aria-hidden="true">
            <circle cx="4" cy="4" r="4" fill="currentColor"/>
          </svg>
          <span><%= message %></span>
        </li>
      <% end %>
    </ul>
  </div>
<% end %>

<% if flash[:alert] %>
  <div class="rounded-lg mb-3 bg-gradient-to-b from-amber-50 to-white border border-amber-200 text-amber-800 p-2"
       role="status" aria-live="polite">
    <div class="flex items-center gap-2">
      <svg class="h-4 w-4 text-amber-600 flex-shrink-0" viewBox="0 0 24 24" aria-hidden="true">
        <path fill="currentColor" d="M11 15h2v2h-2zm0-8h2v6h-2z"/>
      </svg>

      <div class="flex-1"><%= flash[:alert] %></div>

      <button type="button"
              class="ml-2 text-amber-700 hover:text-amber-900 text-xl leading-none bg-transparent border-0 p-1"
              aria-label="閉じる"
              onclick="this.closest('.rounded-lg').style.display='none'">
        &times;
      </button>
    </div>
  </div>
<% end %>
