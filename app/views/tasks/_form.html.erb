<!-- app/views/tasks/_form.html.erb -->
<%= form_with model: task, local: true, class: "space-y-8" do |f| %>
  <%= f.hidden_field :kind %>


  <!-- タイトル（モデル連動） -->
  <div>
    <%= f.label :title, "タイトル", class:"block text-sm font-bold mb-1" %>
    <%= f.text_field :title, 
        class: "block w-full rounded-lg border border-gray-300 px-3 py-2 text-base
              placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-green-200",
        placeholder: "毎日 5時半に起きる" %>
  </div>

  <!-- レベル（難易度：モデル連動） -->
  <div>
    <%= f.label :difficulty, "レベル", class: "block text-sm font-medium mb-1" %>
    <%= f.select :difficulty,
      [['1（やさしい）', 'easy'],
       ['2（ふつう）',   'normal'],
       ['3（難しい）',   'hard']],
      { include_blank: false },
      class: "block w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-base
              focus:outline-none focus:ring-2 focus:ring-blue-500" %>
  </div>

  <!-- タグ（未実装のダミー。将来はタグ機能に接続） -->
  <div>
    <%= f.label :tag, "タグ", class: "block text-sm font-medium mb-1" %>
    <%= f.text_field :tag,
      class: "block w-full rounded-lg border border-gray-300 px-3 py-2 text-base
              placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",
      placeholder: "タグを追加" %>
  </div>


  <!-- 期限(TODO専用) -->
  <% if task.todo? %>
    <div>
      <%= f.label :due_on, "期限", class: "block text-sm font-medium mb-1" %>
      <%= f.date_field :due_on,
        class: "block w-full rounded-lg border border-gray-300 px-3 py-2 text-base
                focus:outline-none focus:ring-2 focus:ring-blue-500" %>
    </div>
  <% end %>

  <!-- 繰り返し(habit専用) -->
  <% if task.habit? %>
  <div>
    <%= f.label :repeat_rule, "繰り返し" %>
    <!-- 曜日チェックボックスで作成予定 -->
    <%= f.select :repeat_rule,
        [["毎日", :daily], ["毎週", :weekly], ["毎月", :monthly]],
        { include_blank: "選択してください" }
        %>
  </div>

  <% end %>

  <!-- 目標(habit専用) -->
  <% if task.habit? %>
    <%= f.label :repeat_rule, "目標" %>
    <!-- 中央に3列の選択肢（値 / 単位 / 期間）が並ぶモーダルを作成予定 -->
    <%= f.text_field :repeat_rule,
      class: "block w-full rounded-lg border border-gray-300 px-3 py-2 text-base
              placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",
      placeholder: "目標" %>
  <% end %>
    


  <!-- アクション -->
  <div class="flex items-center gap-3">
    <%= f.submit "保存",
        class: "inline-flex items-center justify-center rounded-full px-10 py-3
                font-bold text-white shadow-sm
                bg-lime-400 hover:bg-lime-500/90
                transition focus:outline-none focus:ring-lime-800" %>

    <% if task.persisted? %>
      <%= link_to "削除", task_path(@task),
          data: {  turbo_method: :delete, turbo_confirm: "本当に削除しますか？" },
          class: "bg-red-400 text-white font-bold px-10 py-3 rounded-full hover:bg-red-500" %>
    <% end %>
  </div>
<% end %>